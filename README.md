# nhentai Favorites Downloader

一個功能強大的 Chrome 擴充功能，批量下載 nhentai 漫畫並**自動打包為 ZIP**。

![Version](https://img.shields.io/badge/version-2.0.0-e94560)
![Manifest](https://img.shields.io/badge/manifest-v3-blue)
![License](https://img.shields.io/badge/license-MIT-green)

---

## ✨ 功能特色

### 核心功能
- 🎯 **批量下載**：在收藏夾/搜尋頁面勾選多本漫畫，一鍵下載
- 📦 **ZIP 打包**：所有圖片自動打包為單一 ZIP 檔案
- 🔄 **自動重試**：下載失敗時自動重試（指數退避）
- 📜 **歷史記錄**：自動記錄下載歷史，已下載漫畫顯示標記

### 佇列管理
- 📋 **側邊欄佇列**：即時顯示下載進度
- 🔁 **失敗重試**：一鍵重試所有失敗項目
- ⏸️ **取消下載**：隨時中止正在進行的下載

### 多頁面支援
支援在以下頁面使用批量選擇：
- ✅ 收藏夾 `/favorites`
- ✅ 搜尋結果 `/search`
- ✅ 標籤頁 `/tag/*`
- ✅ 作者頁 `/artist/*`
- ✅ 角色頁 `/character/*`
- ✅ 原作頁 `/parody/*`
- ✅ 社團頁 `/group/*`
- ✅ 首頁 `/`

### 自訂設定
| 選項 | 說明 | 預設值 |
|------|------|--------|
| 並行下載數 | 同時下載的圖片數 | 5 |
| JPEG 品質 | 壓縮品質 | 90% |
| 子資料夾 | 批量下載結構 | 開啟 |

---

## ⌨️ 快捷鍵

| 按鍵 | 功能 |
|------|------|
| `A` | 全選 / 取消全選 |
| `D` | 下載已選 |
| `Q` | 開關佇列側邊欄 |
| `Esc` | 取消選擇 / 取消下載 |

---

## 📥 安裝方法

### Chrome / Edge / Brave

1. 下載本擴充功能資料夾到您的電腦
2. 在 Chrome 網址列輸入 `chrome://extensions/`
3. 開啟右上角的「**開發人員模式**」
4. 點擊左上角的「**載入未封裝項目**」
5. 選擇 `nhentai_extension` 資料夾
6. 完成！您會在工具列看到擴充功能圖示

---

## 🚀 使用教學

### 批量下載

1. 登入您的 nhentai 帳號
2. 前往 **收藏夾** 或任意 **搜尋/標籤頁面**
3. 每本漫畫左上角會出現 **勾選框**
4. 勾選想要下載的漫畫（或按 `A` 全選）
5. 按 `D` 或點擊 **「📥 下載已選」** 按鈕
6. 從右側佇列側邊欄觀察進度
7. 完成後自動下載 ZIP！

### 下載單本漫畫

1. 進入任意漫畫頁面 (`/g/xxxxx`)
2. 在資訊區域會出現 **「下載為 ZIP」** 按鈕
3. 點擊即可開始下載

### 右鍵選單

- 在漫畫連結上右鍵 → **下載此漫畫**
- 在列表頁空白處右鍵 → **下載已選漫畫**

---

## 📁 下載格式

批量下載時，ZIP 內容結構：

```
nhentai_batch_2024-12-19T16-30-00.zip
├── [漫畫標題1]/
│   ├── 001.jpg
│   ├── 002.jpg
│   └── ...
└── [漫畫標題2]/
    ├── 001.jpg
    └── ...
```

---

## ⚙️ 設定說明

點擊擴充功能圖示 → **設定** 分頁：

- **並行下載數**：同時下載的圖片數量（1-10），數值越高下載越快，但可能被伺服器限制
- **JPEG 品質**：轉換為 JPEG 時的壓縮品質（50-100%）
- **子資料夾**：批量下載時是否為每本漫畫建立子資料夾

---

## 📜 歷史記錄

- 自動記錄最近 100 筆下載
- 已下載的漫畫會顯示 ✓ 標記
- 可從 Popup 的**歷史**分頁查看/刪除/匯出

---

## ⚠️ 注意事項

- 請確保您已登入 nhentai
- 建議並行下載數設為 3-5，避免被伺服器限制
- 下載失敗時會自動重試 3 次
- 本擴充功能僅供個人學習與研究使用

---

## 🛠️ 技術資訊

- **版本**: 2.0.0
- **Manifest Version**: 3
- **相容瀏覽器**: Chrome, Edge, Brave
- **權限**: 
  - `activeTab` - 存取當前分頁
  - `downloads` - 下載檔案
  - `storage` - 儲存設定與歷史
  - `contextMenus` - 右鍵選單

---

## 📋 更新日誌

### v2.0.0
- ✨ 新增：下載佇列側邊欄
- ✨ 新增：下載歷史記錄（100 筆）
- ✨ 新增：自動重試機制
- ✨ 新增：設定面板（並行數、品質、格式）
- ✨ 新增：右鍵選單
- ✨ 新增：多頁面支援（搜尋/標籤/作者等）
- ✨ 新增：無限滾動支援
- ✨ 新增：已下載標記
- 🎨 改進：Popup UI（Tab 導航）
- 🐛 修復：友善的錯誤訊息

### v1.2.0
- ✨ 新增：並行下載提升速度
- ✨ 新增：快捷鍵支援
- ✨ 新增：取消下載功能

### v1.0.0
- 🎉 初始版本

---

Made with ❤️
